generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id            String         @id @default(uuid())
  firstName     String
  lastName      String
  email         String         @unique
  password      String
  dateOfBirth   String
  gender        String
  country       String
  weight        String?
  height        String?
  city          String?
  profileImage  String?
  refreshTokens RefreshToken[]
  workouts      Workout[]
  meals         Meal[]
  goals         Goal[]
  progress      Progress[]
}

model RefreshToken {
  id     String @id @default(uuid())
  token  String @unique @db.VarChar(400)
  userId String
  user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Workout {
  id       String   @id @default(uuid())
  date     DateTime
  type     String
  duration Int
  calories Int
  userId   String
  speed    Int
  effort   String
  user     User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Meal {
  id          String   @id @default(uuid())
  date        DateTime
  type        String
  calories    Int
  description String?
  userId      String
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Goal {
  id          String   @id @default(uuid())
  description String
  targetDate  DateTime
  achieved    Boolean  @default(false)
  userId      String
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model Progress {
  id         String   @id @default(uuid())
  date       DateTime
  weight     Float?
  bodyFat    Float?
  muscleMass Float?
  userId     String
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}
